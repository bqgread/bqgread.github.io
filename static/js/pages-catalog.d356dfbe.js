(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-catalog"],{2909:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var i=l(n("6005")),o=l(n("db90")),a=l(n("06c5")),r=l(n("3427"));function l(t){return t&&t.__esModule?t:{default:t}}function s(t){return(0,i.default)(t)||(0,o.default)(t)||(0,a.default)(t)||(0,r.default)()}},3427:function(t,e,n){"use strict";function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},6005:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var i=o(n("6b75"));function o(t){return t&&t.__esModule?t:{default:t}}function a(t){if(Array.isArray(t))return(0,i.default)(t)}},"62a4":function(t,e,n){"use strict";n.r(e);var i=n("fbe1"),o=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a},8238:function(t,e,n){"use strict";n.r(e);var i=n("8957"),o=n("62a4");for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);n("ce88");var r,l=n("f0c5"),s=Object(l["a"])(o["default"],i["b"],i["c"],!1,null,"9427ca94",null,!1,i["a"],r);e["default"]=s.exports},8957:function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{class:[t.backgroundcolor,t.textcolor,t.fontsize]},[n("cu-custom",{attrs:{bgColor:t.bgColor,isBack:!0}},[n("template",{attrs:{slot:"backText"},slot:"backText"},[t._v("返回")]),n("template",{attrs:{slot:"content"},slot:"content"},[n("v-uni-text",{class:[t.fontsize]},[t._v("目录")])],1)],2),n("v-uni-view",{staticClass:"page",class:[t.backgroundcolor,t.textcolor,t.fontsize]},[t.ismini?t._e():n("v-uni-view",{staticClass:"shadow margin-bottom-xs padding"},[t.follow_status?n("v-uni-view",{staticClass:"text-bold"},[n("v-uni-text",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.unfollow.apply(void 0,arguments)}}},[t._v(t._s(t.title)),n("v-uni-text",{staticClass:"cuIcon-favorfill"})],1)],1):t._e(),!t.follow_status&&t.links.length?n("v-uni-view",{staticClass:"text-bold"},[n("v-uni-text",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.follow.apply(void 0,arguments)}}},[t._v(t._s(t.title)),n("v-uni-text",{staticClass:"cuIcon-favor"})],1)],1):t._e(),t.source_url?n("v-uni-view",{staticClass:"flex  justify-between"},[n("v-uni-view",{attrs:{"data-val":t.source_url},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setcp.apply(void 0,arguments)}}},[t._v(t._s(t.sourceURL))]),n("v-uni-view",{staticClass:"cuIcon-share",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showShare.apply(void 0,arguments)}}})],1):t._e()],1),t.ismini?n("v-uni-view",{staticClass:"shadow margin-bottom-xs padding"},[t.links.length?n("v-uni-view",{staticClass:"text-bold"},[n("v-uni-text",[t._v(t._s(t.title))])],1):t._e(),t.source_url?n("v-uni-view",{staticClass:"flex  justify-between"},[n("v-uni-view",{attrs:{"data-val":t.source_url},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setcp.apply(void 0,arguments)}}},[t._v(t._s(t.sourceURL))]),n("v-uni-view",{staticClass:"cuIcon-share",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showShare.apply(void 0,arguments)}}})],1):t._e()],1):t._e(),t.lately_log.title&&t.lately_log.wxto?n("v-uni-view",[n("v-uni-view",{staticClass:"padding-xs padding-lr solid-top flex",attrs:{"data-url":t.lately_log.wxto+"&menu="+t.url+"&menutitle="+t.title},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goto.apply(void 0,arguments)}}},[n("v-uni-view",[t._v("最近阅读:")]),n("v-uni-view",{staticClass:"flex-sub text-right"},[t._v(t._s(t.lately_log.title))])],1)],1):t._e(),t._l(t.links,(function(e,i){return n("v-uni-view",{attrs:{index:i}},[n("v-uni-navigator",{staticClass:"padding-xs padding-lr solid-top",attrs:{url:e.wxto+"&menu="+t.url+"&menutitle="+t.title}},[t._v(t._s(e.title))])],1)})),1==t.state?n("v-uni-view",{staticClass:"cu-load loading"}):t._e(),2==t.state?n("v-uni-view",{staticClass:"text-center",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.reloaddata()}}},[t._v("到底了")]):t._e(),3==t.state?n("v-uni-view",{staticClass:"text-center",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.reloaddata()}}},[t._v("重新加载")]):t._e(),0==t.state?n("v-uni-view",{staticClass:"text-center",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.loadmore()}}},[t._v("加载更多")]):t._e()],2),t.links.length&&!t.ismini&&t.hasrec?n("v-uni-view",{staticClass:"showAct bg-black text-center",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.doRecommend.apply(void 0,arguments)}}},[n("v-uni-text",{class:[t.isRecommend?"cuIcon-activityfill":"cuIcon-activity"],staticStyle:{"font-size":"56rpx"}})],1):t._e(),t.links.length>100?[n("v-uni-view",{staticClass:"showtop bg-black text-center",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.gototop.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"cuIcon-triangleupfill",staticStyle:{"font-size":"56rpx"}})],1),n("v-uni-view",{staticClass:"showbottom bg-black text-center",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.gotobottom.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"cuIcon-triangledownfill",staticStyle:{"font-size":"56rpx"}})],1)]:t._e(),n("v-uni-view",{staticClass:"cu-modal bottom-modal",class:t.showShareStatus?"show":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideShare.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"cu-dialog",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e)}}},[n("v-uni-view",{staticClass:"padding-xl"},[n("v-uni-view",{staticClass:"flex"},[n("v-uni-button",{staticClass:"flex-sub content",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showQrcode.apply(void 0,arguments)}}},[t._v("二维码"),n("v-uni-text",{staticClass:"cuIcon-qrcode"})],1),n("v-uni-button",{staticClass:"flex-sub content",attrs:{"open-type":"share"}},[t._v("分享"),n("v-uni-text",{staticClass:"cuIcon-forward"})],1)],1)],1)],1)],1),t.isIpx?n("v-uni-view",{staticClass:"cu-tabbar-height"}):t._e()],2)},a=[]},ce88:function(t,e,n){"use strict";var i=n("e74d"),o=n.n(i);o.a},db90:function(t,e,n){"use strict";function i(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}n("a4d3"),n("e01a"),n("d28b"),n("a630"),n("d3b7"),n("3ca3"),n("ddb0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},e74d:function(t,e,n){var i=n("eb85");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("4f06").default;o("e5a99488",i,!0,{sourceMap:!1,shadowMode:!1})},eb85:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".page[data-v-9427ca94]{min-height:100vh}.cu-card>.cu-item[data-v-9427ca94]{background-color:transparent}.cu-card.article>.cu-item .title[data-v-9427ca94]{color:inherit;font-size:inherit}.cu-card.article>.cu-item .content .text-content[data-v-9427ca94]{color:inherit;font-size:inherit}.showAct[data-v-9427ca94]{position:fixed;bottom:%?226?%;right:%?32?%;width:%?72?%;height:%?72?%;line-height:%?72?%;opacity:.4}.showtop[data-v-9427ca94]{position:fixed;bottom:%?148?%;right:%?32?%;width:%?72?%;height:%?72?%;line-height:%?72?%;opacity:.4}.showbottom[data-v-9427ca94]{position:fixed;bottom:%?76?%;right:%?32?%;width:%?72?%;height:%?72?%;line-height:%?72?%;opacity:.4}.cu-dialog uni-button[data-v-9427ca94]:after{border:none;background-color:inherit}.cu-dialog uni-button.content[data-v-9427ca94]{background-color:inherit}.cu-dialog uni-button.content[data-v-9427ca94]::after{border:none}",""]),t.exports=e},fbe1:function(t,e,n){"use strict";var i=n("4ea4");n("ac1f"),n("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("2909"));n("96cf");var a=i(n("1da1")),r=i(n("c086")),l=i(n("e143")),s={name:"catelog",data:function(){return{backgroundcolor:this.backgroundcolor,fontsize:this.fontsize,textcolor:this.textcolor,url:"",source_url:"",drive:"",title:"目录加载中",save_title:"",links:[],lately_log:[],logs:[],follow_list:[],next:[],hash:"",load_url:"",follow_status:!1,state:1,adshow:!0,loadcount:this.loadcount,interstitialAd:null,isIpx:this.isIpx,ismini:this.ismini,hasrec:this.hasrec,showShareStatus:!1,isRecommend:!1}},computed:{banner_adid:function(){return l.default.prototype.appconfig?l.default.prototype.appconfig.cata_banner:null},custom_adid:function(){return l.default.prototype.appconfig?l.default.prototype.appconfig.cata_custom:null},video_adid:function(){return l.default.prototype.appconfig?l.default.prototype.appconfig.cata_video:null},screen_adid:function(){return l.default.prototype.appconfig?l.default.prototype.appconfig.cata_screen:null},viewAdBgColor:function(){return"bg-black"==this.backgroundcolor||"bg-dark"==this.backgroundcolor||"bg-grey"==this.backgroundcolor||"bg-brown"==this.backgroundcolor?"black":"white"},bgColor:function(){return this.backgroundcolor+" "+this.textcolor+" "+this.fontsize},sourceURL:function(){if(this.source_url){var t=this.source_url.split("/");if(t[2])return t[2]}return""}},methods:{doRecommend:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isRecommend){e.next=8;break}return n="/pages/catalog?drive="+t.drive+"&url="+t.url,e.next=4,r.default.NewActivity(t.title,n);case 4:i=e.sent,i?uni.showToast({title:"推荐成功",icon:"none"}):uni.showToast({title:"推荐失败",icon:"none"}),e.next=9;break;case 8:uni.showToast({title:"重复推荐",icon:"none"});case 9:t.isRecommend=!0;case 10:case"end":return e.stop()}}),e)})))()},hideShare:function(){this.showShareStatus=!1},showShare:function(){this.showShareStatus=!0},adClose:function(){this.adshow=!1},loadscreen:function(){this.loadcount++,20==this.loadcount&&(this.loadcount=0)},follow:function(){var t=this;if(t.follow_list.length>0)for(var e=0;e<t.follow_list.length;e++)if(t.follow_list[e].url==t.url)return;var n={title:t.title,type:"link",wxto:"/pages/catalog?drive="+t.drive+"&url="+t.url,hash:t.hash,url:t.url};t.follow_list.push(n),uni.setStorage({key:"___follow_list",data:t.follow_list}),t.follow_status=!0,uni.showToast({title:"已添加收藏",icon:"none"})},unfollow:function(){var t=this,e=[];if(t.follow_list.length>0){for(var n=0;n<t.follow_list.length;n++)t.follow_list[n].url!=t.url&&e.push(t.follow_list[n]);t.follow_list=e,uni.setStorage({key:"___follow_list",data:e}),t.follow_status=!1,uni.showToast({title:"已取消收藏",icon:"none"})}},setcp:function(t){var e=t.currentTarget.dataset.val;uni.showModal({title:"转码声明",content:"本内容通过实时转码技术为您呈现，版权及相关连带归源站所有！来源网站地址:"+e,showCancel:!1})},loadmore:function(){this.state=1;var t=this;t.next&&""!=t.next.url&&(t.fetch(t.next.url,t.drive),t.next=[])},reloaddata:function(){this.load_url?(this.state=1,this.fetch(this.load_url,this.drive)):this.state=2},goto:function(t){var e=t.currentTarget.dataset.url;e&&uni.navigateTo({url:e})},initload:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function e(){var n,i,o,a,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t,n.follow_list=uni.getStorageSync("___follow_list"),n.follow_list||(i=uni.getStorageSync("__follow_list"),n.follow_list=i&&JSON.parse(i)||[]),!(n.follow_list.length>0)){e.next=12;break}o=0;case 5:if(!(o<n.follow_list.length)){e.next=12;break}if(n.follow_list[o].url!=n.url){e.next=9;break}return n.follow_status=!0,e.abrupt("break",12);case 9:o++,e.next=5;break;case 12:return e.next=14,r.default.GetActivities();case 14:a=e.sent,l="/pages/catalog?drive="+t.drive+"&url="+t.url,t.isRecommend=r.default.CheckExistActivity(l,a);case 17:case"end":return e.stop()}}),e)})))()},fetch:function(t,e){var n=this;return(0,a.default)(regeneratorRuntime.mark((function i(){var a,l,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n.loadscreen(),a=n,a.load_url=t,i.prev=3,i.next=6,r.default.GetCatalog(t,e);case 6:l=i.sent,l.Cards.length>0?(a.title=l.title,(s=a.links).push.apply(s,(0,o.default)(l.Cards)),a.source_url=l.source_url,a.hash=l.hash,a.next=l.next,n.state=0):n.state=3,i.next=13;break;case 10:i.prev=10,i.t0=i["catch"](3),a.state=3;case 13:case"end":return i.stop()}}),i,null,[[3,10]])})))()},gototop:function(){return(0,a.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:uni.pageScrollTo({scrollTop:0,duration:300});case 1:case"end":return t.stop()}}),t)})))()},gotobottom:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:uni.pageScrollTo({scrollTop:50*t.links.length,duration:300});case 1:case"end":return e.stop()}}),e)})))()},showQrcode:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=r.default.GetQrcodr(encodeURIComponent("/pages/catalog?drive="+t.drive+"&url="+encodeURIComponent(t.url))),uni.previewImage({current:n,urls:[n]});case 2:case"end":return e.stop()}}),e)})))()}},onLoad:function(t){var e=this;return(0,a.default)(regeneratorRuntime.mark((function n(){var i,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=t.url,o=t.drive,r.default.setNavigationBarColor(),n.next=4,r.default.ConnectApi();case 4:return e.url=i,e.drive=o,void 0!=e.url&&void 0!=e.drive||uni.showModal({title:"出错了",content:"缺少必要的参数：url:"+e.url+";drive:"+e.drive,showCancel:!1}),e.state=1,n.next=10,e.initload();case 10:return n.next=12,e.fetch(i,e.drive);case 12:return e.links.length>0&&r.default.NewCataLog(e.url,e.title,"/pages/catalog?drive="+e.drive+"&url="+e.url,e.drive),n.next=15,r.default.GetInfoLatelyLog(i);case 15:e.lately_log=n.sent,e.hasrec=l.default.prototype.hasrec;case 17:case"end":return n.stop()}}),n)})))()},onReachBottom:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t,n.next&&void 0!=n.next.url&&n.next.url?(n.state=1,n.fetch(n.next.url,n.drive),n.next=[]):n.state=2;case 2:case"end":return e.stop()}}),e)})))()},onShareAppMessage:function(t){return{title:this.title,path:"/pages/catalog?drive="+this.drive+"&url="+this.url+"&uid="+l.default.prototype.uid}},onPullDownRefresh:function(){this.links=[],this.state=1,this.fetch(this.url,this.drive),uni.stopPullDownRefresh()}};e.default=s}}]);